

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Proven Headers &mdash; Stratis Academy  documentation</title>
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="How Proven Headers provide a “headers first” solution for a Proof-of-Stake blockchain" href="how-proven-headers-provide-a-solution.html" />
    <link rel="prev" title="Creating a custom consensus algorithm summary" href="../Consensus/custom-consensus-algorithm-steps.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Stratis Academy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Blockchain%20Overview/blockchain-overview-introduction.html">Blockchain Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../architecture-reference-introduction.html">Architecture Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../full-node-introduction.html">Full Node</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ComponentsOverview/full-node-components-and-features-overview.html">Components and Features Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ConsoleOutput/ConsoleOutput.html">Console Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Features/features.html">Creating custom builds and extending the feature set</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PoS/PoS-introduction.html">Proof-of-Stake (PoS) implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PoA/PoA-introduction.html">Proof-of-Authority (PoA) implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Consensus/consensus-introduction.html">Consensus</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Proven Headers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="how-proven-headers-provide-a-solution.html">How Proven Headers provide a “headers first” solution for a Proof-of-Stake blockchain</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ColdStaking/ColdStaking.html">Cold Staking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SmartContracts/smartcontracts-introduction.html">Smart Contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sidechains/sidechains-introduction.html">Sidechains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DLT/dlt-introduction.html">DLT</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Developer%20Resources/developers-introduction.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Operation%20Guides/operation-guides-introduction.html">Operation Guides</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Stratis Academy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../architecture-reference-introduction.html">Architecture Reference</a> &raquo;</li>
        
          <li><a href="../full-node-introduction.html">Stratis Full Node</a> &raquo;</li>
        
      <li>Proven Headers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/Architecture Reference/FullNode/ProvenHeaders/proven-headers-introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="proven-headers">
<h1>Proven Headers<a class="headerlink" href="#proven-headers" title="Permalink to this heading">¶</a></h1>
<p>The Bitcoin protocol uses a “headers first” Initial Block Download (IBD) methodology. This involves downloading the headers for the best chain, performing <a class="reference internal" href="../Consensus/consensus-architecture.html"><span class="doc">header validation</span></a>, and then making a request to download the corresponding blocks. This has the effect of speeding up the downloading of blocks on the network. Compared to using <a class="reference external" href="https://en.bitcoin.it/wiki/Protocol_documentation#inv">inv messages</a> containing a list of blocks, the “headers first” way of receiving blocks has advantages in terms of resource usage. A <a class="reference external" href="https://en.bitcoin.it/wiki/Protocol_documentation#getheaders">getheaders message request</a> can be made to a peer to send up to 2000 headers at a time.</p>
<p>As it stands, this aspect of the Bitcoin protocol is well suited to a <a class="reference external" href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch10.asciidoc#proof-of-work-algorithm">Proof-of-Work (PoW)</a> blockchain like Bitcoin. However, <a class="reference internal" href="../PoS/PoS-introduction.html"><span class="doc">Proof-of-Stake (PoS)</span></a> blockchains implementing the standard header syncing taken directly from Bitcoin are vulnerable to attack. Why is this? First, let’s explore how an attack could theoretically work on blockchains using either type of algorithm. The attack would involve sending a chain of headers in response to a request, but in this chain, the referenced blocks would not exist. A node receiving  this fake chain of headers would then become “stuck” trying to download blocks that do not exist. This would continue until an alternative, genuine chain becomes available that is longer than the fake chain. At this point, a node that has been knocked out by the attack could switch to the genuine chain and continue as normal. A long fake chain has the potential to knock a node out for a long period of time.</p>
<p>The reason that Proof-of-Work blockchains are, for practical purposes, immune from these attacks is that constructing fake headers using a Proof-of-Work algorithm is expensive in terms of computing power. For each fake header, a valid nonce would need to be calculated, and a brute force approach, taking both time and money, is the only option here. A valid nonce hits the target at the required difficulty level (which is also supplied with each header). Because the nonce and difficulty level are supplied with each header, it is easy for a PoW node to check if the nonce is valid for any header in a chain.</p>
<p>On a Proof-of-Stake blockchain, the nonce is not used to attempt to hit the target, and, in fact, the nonce field remains empty in block headers on a Proof-of-Stake blockchain. Instead, when an attempt is made to hit the target, the UTXOs from a staker’s wallet are used rather than simply using an integer (the nonce). A UTXO that successfully hits the target is known as the coinstake kernel. However, because no reference to the coinstake kernel is included in the header, there is no way, when using the standard header syncing, to check if a header is valid. Therefore, fake chains of headers, which contain no proof at all, can be created at almost any length.</p>
<p>The purpose of this document is to give an overview of how the Stratis Full Node implements a solution to this vulnerability using “proven headers”, which extend the information available in each header.</p>
<p>The document takes an architectural view of the Proven Headers solution. However, a knowledge of C# is beneficial, particularly if you decide to explore the implementation in code.</p>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="how-proven-headers-provide-a-solution.html">How Proven Headers provide a “headers first” solution for a Proof-of-Stake blockchain</a><ul>
<li class="toctree-l2"><a class="reference internal" href="how-proven-headers-provide-a-solution.html#proven-header-messages">Proven header messages</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-proven-headers-provide-a-solution.html#how-the-headers-were-extended-to-become-block-headers">How the headers were extended to become block headers?</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-proven-headers-provide-a-solution.html#why-coinstake-age-was-adjusted">Why coinstake age was adjusted?</a></li>
<li class="toctree-l2"><a class="reference internal" href="how-proven-headers-provide-a-solution.html#exploring-the-proven-header-rules-in-detail">Exploring the proven header rules in detail</a></li>
</ul>
</li>
</ul>
</div>
</section>


           </div>
           
          </div>
          
        </div>
      </div>
      <footer class="footer-container">
  <div class="footer-pagination">
    
      <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
          <a href="how-proven-headers-provide-a-solution.html" class="btn btn-primary float-right" title="How Proven Headers provide a “headers first” solution for a Proof-of-Stake blockchain" accesskey="n" rel="next">Next <span class="fa fa-arrow-right"></span></a>
        
        
          <a href="../Consensus/custom-consensus-algorithm-steps.html" class="btn btn-neutral" title="Creating a custom consensus algorithm summary" accesskey="p" rel="prev"><span class="fa fa-arrow-left"></span> Previous</a>
        
      </div>
    
  </div>

  <div role="contentinfo" class="footer-copyright">
    <div class="footer-logo-copyright">
      <img src="../../../_static/img/footer-logo.png" alt="Stratis" class="footer-logo">
      <p>
          &copy; Copyright 2020, Stratis Group Ltd.

      </p>
    </div>

    <div class="footer-links">
      <a class="footer-social-link" href="https://twitter.com/stratisplatform" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      <a class="footer-social-link" href="https://github.com/stratisproject" target="_blank"><i class="fa fa-github-alt" aria-hidden="true"></i></a>
      <a class="footer-social-link" href="https://discord.gg/9tDyfZs" target="_blank"><img src="../../../_static/img/discord.png" alt="Discord" style="width: 26px; height: 26px;"></a>
    </div>

    <div style="clear: both;"></div>
  </div> 

</footer>


      <div style="clear: both;"></div>
    </section>
    
  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/sphinx_highlight.js"></script>

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>