

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Consensus &mdash; Stratis Academy  documentation</title>
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Consensus architecture" href="consensus-architecture.html" />
    <link rel="prev" title="The role of the federation on PoA networks" href="../PoA/the-role-of-the-federation.html" /> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Stratis Academy
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../Blockchain%20Overview/blockchain-overview-introduction.html">Blockchain Overview</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../architecture-reference-introduction.html">Architecture Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../full-node-introduction.html">Full Node</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../ComponentsOverview/full-node-components-and-features-overview.html">Components and Features Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ConsoleOutput/ConsoleOutput.html">Console Output</a></li>
<li class="toctree-l3"><a class="reference internal" href="../Features/features.html">Creating custom builds and extending the feature set</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PoS/PoS-introduction.html">Proof-of-Stake (PoS) implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../PoA/PoA-introduction.html">Proof-of-Authority (PoA) implementation</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Consensus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="consensus-architecture.html">Consensus architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="customising-consensus-rule-engines.html">Customizing consensus rule engines and their rulesets</a></li>
<li class="toctree-l4"><a class="reference internal" href="custom-consensus-algorithm-steps.html">Creating a custom consensus algorithm summary</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../ProvenHeaders/proven-headers-introduction.html">Proven Headers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../ColdStaking/ColdStaking.html">Cold Staking</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../SmartContracts/smartcontracts-introduction.html">Smart Contracts</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../Sidechains/sidechains-introduction.html">Sidechains</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../DLT/dlt-introduction.html">DLT</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Developer%20Resources/developers-introduction.html">Developer Resources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../Operation%20Guides/operation-guides-introduction.html">Operation Guides</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Stratis Academy</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../architecture-reference-introduction.html">Architecture Reference</a> &raquo;</li>
        
          <li><a href="../full-node-introduction.html">Stratis Full Node</a> &raquo;</li>
        
      <li>Consensus</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/Architecture Reference/FullNode/Consensus/consensus-introduction.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="consensus">
<h1>Consensus<a class="headerlink" href="#consensus" title="Permalink to this heading">Â¶</a></h1>
<p>The Stratis Full Node supports <a class="reference internal" href="../PoS/PoS-introduction.html"><span class="doc">Proof-of-Stake (PoS)</span></a>, <a class="reference external" href="https://github.com/bitcoinbook/bitcoinbook/blob/develop/ch10.asciidoc#proof-of-work-algorithm">Proof-of-Work (PoW)</a>, and <a class="reference internal" href="../PoA/PoA-introduction.html"><span class="doc">Proof-of-Authority (PoA)</span></a> algorithms. Each algorithm uses a different model of consensus, which is to say each algorithm uses a different set of validation rules to authenticate blocks which are written to the blockchain. All nodes check every block they are sent using at least one group of consensus rules (see below). If a block violates any of the rules, any node can ban the block and attempt to have the peer that sent the block banned.</p>
<p>Because of the modular nature of the Full Node, it is possible to create a new algorithm from one of the existing algorithms and then modify the existing rules, removes rules entirely, or add completely new rules. Ultimately, a completely new algorithm can be designed if that is required.</p>
<p>This document covers how the main components involved in consensus interact with each other, including the Consensus Manager, the Chained Header Tree, and the Validators. The main code paths involved are explored, and broadly speaking, you will be able to see where your own code will go if you choose to modify consensus on the Full Node.</p>
<p>There are four groups of rules which can be defined for an algorithm, and these rule groupings are classified according to the depth and focus of the validation they perform. The components call one or more of the four groupings depending on the situation.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Validation</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Header</p></td>
<td><p>Checks if the header is valid. The information in the header varies depending on the algorithm.</p></td>
</tr>
<tr class="row-odd"><td><p>Minimal (Block Integrity)</p></td>
<td><p>Performs a mimimal check on a block just to check its basic integrity.</p></td>
</tr>
<tr class="row-even"><td><p>Partial</p></td>
<td><p>Performs a partial validation on a block.</p></td>
</tr>
<tr class="row-odd"><td><p>Full</p></td>
<td><p>Performs a full validation on a block. This is an extension to the partial validation rules and does not include them.</p></td>
</tr>
</tbody>
</table>
<p>As you might expect, the PoS, PoW, and PoA algorithms all have their own distinct set of rules for each group although there is some crossover. Later in the document, you will explore what the individual rules themselves check for and how this ties in with the algorithms themselves.</p>
<p>The purpose of this document is to give you ideas on how you can adjust the way the nodes reach a consensus to make a custom blockchain.</p>
<p>A knowledge of C# is assumed. In particular, you should have a good grasp of <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/classes-and-structs/inheritance">inheritance</a>, <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/interfaces/index">interfaces</a>, <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/virtual">virtual functions</a>, and <a class="reference external" href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/abstract">abstract classes and functions</a>. If any of these topics are new to you, you might want to read up on them before you begin.</p>
<div class="toctree-wrapper compound">
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="consensus-architecture.html">Consensus architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="consensus-architecture.html#when-does-the-consensus-manager-request-block-validation">When does the Consensus Manager request block validation?</a></li>
<li class="toctree-l2"><a class="reference internal" href="consensus-architecture.html#when-does-the-chained-header-tree-request-header-validation">When does the Chained Header Tree request header validation?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="customising-consensus-rule-engines.html">Customizing consensus rule engines and their rulesets</a><ul>
<li class="toctree-l2"><a class="reference internal" href="customising-consensus-rule-engines.html#how-a-consensus-rule-engine-works">How a consensus rule engine works</a></li>
<li class="toctree-l2"><a class="reference internal" href="customising-consensus-rule-engines.html#defining-your-own-rules">Defining your own rules</a></li>
<li class="toctree-l2"><a class="reference internal" href="customising-consensus-rule-engines.html#registering-consensus-features">Registering consensus features</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom-consensus-algorithm-steps.html">Creating a custom consensus algorithm summary</a></li>
</ul>
</div>
</section>


           </div>
           
          </div>
          
        </div>
      </div>
      <footer class="footer-container">
  <div class="footer-pagination">
    
      <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        
          <a href="consensus-architecture.html" class="btn btn-primary float-right" title="Consensus architecture" accesskey="n" rel="next">Next <span class="fa fa-arrow-right"></span></a>
        
        
          <a href="../PoA/the-role-of-the-federation.html" class="btn btn-neutral" title="The role of the federation on PoA networks" accesskey="p" rel="prev"><span class="fa fa-arrow-left"></span> Previous</a>
        
      </div>
    
  </div>

  <div role="contentinfo" class="footer-copyright">
    <div class="footer-logo-copyright">
      <img src="../../../_static/img/footer-logo.png" alt="Stratis" class="footer-logo">
      <p>
          &copy; Copyright 2020, Stratis Group Ltd.

      </p>
    </div>

    <div class="footer-links">
      <a class="footer-social-link" href="https://twitter.com/stratisplatform" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a>
      <a class="footer-social-link" href="https://github.com/stratisproject" target="_blank"><i class="fa fa-github-alt" aria-hidden="true"></i></a>
      <a class="footer-social-link" href="https://discord.gg/9tDyfZs" target="_blank"><img src="../../../_static/img/discord.png" alt="Discord" style="width: 26px; height: 26px;"></a>
    </div>

    <div style="clear: both;"></div>
  </div> 

</footer>


      <div style="clear: both;"></div>
    </section>
    
  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            LANGUAGE:'en',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../../_static/documentation_options.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/sphinx_highlight.js"></script>

  

  <script type="text/javascript" src="../../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>